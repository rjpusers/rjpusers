<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>2013年度統計数理研究所共同研究集会 データ解析環境Rの整備と利用 – 統計数理研究所 共同利用 研究集会「データ解析環境{{&lt; fa brands r-project title='R' &gt;}}の整備と利用」</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<link href="../images/favicon.ico" rel="icon">
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-7ce46e092fd8e9b6f7e1c1a6b3565b5d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "一致なし",
    "search-matching-documents-text": "一致した文書",
    "search-copy-link-title": "検索へのリンクをコピー",
    "search-hide-matches-text": "追加の検索結果を非表示",
    "search-more-match-text": "追加の検索結果",
    "search-more-matches-text": "追加の検索結果",
    "search-clear-button-title": "消去",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "取消",
    "search-submit-button-title": "検索",
    "search-label": "サーチ"
  }
}</script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../images/apple-touch-icon.png" alt="" class="navbar-logo light-content">
    <img src="../images/apple-touch-icon.png" alt="" class="navbar-logo dark-content">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">統計数理研究所 共同利用 研究集会「データ解析環境<i class="fa-brands fa-r-project" title="R" aria-label="r-project"></i>の整備と利用」</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="ナビゲーションを切り替える" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">ホーム</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">R研究集会について</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">最近のイベント</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-">    
        <li>
    <a class="dropdown-item" href="../event/2024.html">
 <span class="dropdown-text">2024年度</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../event/2023.html">
 <span class="dropdown-text">2023年度</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../event/2022.html">
 <span class="dropdown-text">2022年度</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../event/2021.html">
 <span class="dropdown-text">2021年度</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../event/2020.html">
 <span class="dropdown-text">2020年度</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../event/2018.html">
 <span class="dropdown-text">2018年度</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">目次</h2>
   
  <ul>
  <li><a href="#プログラム" id="toc-プログラム" class="nav-link active" data-scroll-target="#プログラム">プログラム</a>
  <ul class="collapse">
  <li><a href="#月29日-海外ゲスト講師によるチュートリアル講演英語" id="toc-月29日-海外ゲスト講師によるチュートリアル講演英語" class="nav-link" data-scroll-target="#月29日-海外ゲスト講師によるチュートリアル講演英語">11月29日 海外ゲスト講師によるチュートリアル講演（英語）</a></li>
  <li><a href="#月30日-国内ユーザによる報告" id="toc-月30日-国内ユーザによる報告" class="nav-link" data-scroll-target="#月30日-国内ユーザによる報告">11月30日 国内ユーザによる報告</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">2013年度統計数理研究所共同研究集会<br>データ解析環境Rの整備と利用</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<ul>
<li>日時: 2013年11月29日、30日</li>
<li>場所: 統計数理研究所（東京都立川市）セミナー室1</li>
<li>参加費用: 無料</li>
<li>ネット中継（録画なし，ライブのみ）: http://www.ustream.tv/channel/rlangism</li>
</ul>
<section id="プログラム" class="level2">
<h2 class="anchored" data-anchor-id="プログラム">プログラム</h2>
<section id="月29日-海外ゲスト講師によるチュートリアル講演英語" class="level3">
<h3 class="anchored" data-anchor-id="月29日-海外ゲスト講師によるチュートリアル講演英語">11月29日 海外ゲスト講師によるチュートリアル講演（英語）</h3>
<p>Speaker: Professor Duncan Murdoch (Department of Statistical &amp; Actuarial Sciences,　University of Western Ontario, Canada)</p>
<table class="caption-top table">
<colgroup>
<col style="width: 46%">
<col style="width: 53%">
</colgroup>
<thead>
<tr class="header">
<th>Time</th>
<th style="text-align: left;">Title</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>10:00-10:55</td>
<td style="text-align: left;">Part I: Reproducible Research in R. Part I: using Sweave</td>
</tr>
<tr class="even">
<td>11:05-12:00</td>
<td style="text-align: left;">Part II: Advanced Sweave, including patchDVI and RStudio</td>
</tr>
<tr class="odd">
<td>13:00-13:55</td>
<td style="text-align: left;">What’s New in R 3.0.x</td>
</tr>
<tr class="even">
<td>14:05-15:00</td>
<td style="text-align: left;">Beautiful tables in R: the tables package.</td>
</tr>
<tr class="odd">
<td>15:10-16:05</td>
<td style="text-align: left;">Writing Package Vignettes</td>
</tr>
<tr class="even">
<td>16:05-16:20</td>
<td style="text-align: left;">discussion</td>
</tr>
</tbody>
</table>
<section id="part-i-reproducible-research-in-r.-part-i-using-sweave" class="level4">
<h4 class="anchored" data-anchor-id="part-i-reproducible-research-in-r.-part-i-using-sweave">Part I: Reproducible Research in R. Part I: using Sweave</h4>
<pre><code>Sweave is a literate programming tool for R, allowing R code to be
embedded in a LaTeX document.  When Sweave processes the document, the
code is run, and output (including graphics) is automatically embedded.
This allows documents to be produced in a way which allows readers
to reproduce all of the computations, allowing them to be better
understood and verified.   

In this talk I will give an introduction to reproducible research and
Sweave.</code></pre>
</section>
<section id="part-ii-advanced-sweave-including-patchdvi-and-rstudio" class="level4">
<h4 class="anchored" data-anchor-id="part-ii-advanced-sweave-including-patchdvi-and-rstudio">Part II: Advanced Sweave, including patchDVI and RStudio</h4>
<pre><code>This talk continues part I, discussing more advanced features in 
Sweave, and my patchDVI package.  The patchDVI package helps
you when developing Sweave documents.  It creates links between the
resulting .dvi or .pdf file and the Sweave source file, facilitating
editing and modification.  It also adds support for multi-file projects.
The RStudio editor implements similar functionality in an 
integrated development environment.</code></pre>
</section>
<section id="whats-new-in-r-3.0.x-1300-1355" class="level4">
<h4 class="anchored" data-anchor-id="whats-new-in-r-3.0.x-1300-1355">What’s New in R 3.0.x (13:00-13:55)</h4>
<pre><code>R version 3.0.0 was released in April. In this talk I will describe the 
R release practices, and give some details about the 3.0.x series:
 - large vectors 
 - detailed parse information 
 - more flexible definition of vignettes
Plans for the future will also be discussed.</code></pre>
</section>
<section id="beautiful-tables-in-r-the-tables-package-1405-1500-the-tables-package-on-cran" class="level4">
<h4 class="anchored" data-anchor-id="beautiful-tables-in-r-the-tables-package-1405-1500-the-tables-package-on-cran">Beautiful Tables in R: the tables Package (14:05-15:00) / The tables package on CRAN</h4>
<pre><code>Tables are an old, boring topic:  everything there is to say about them was
said by Ehrenberg (JRSS A, 1977).  But they are under attack, e.g. Gelman's
tongue-in-cheek ``Why tables are really much better than graphs'' (JCGS, 2011),
because there are so many badly produced tables in published papers. The
tables package is an effort to counteract this, to make it easy to
produce good tables.  It uses a formula interface to describe the table
(reminiscent of PROC TABULATE in SAS), and produces ASCII, CSV or
LaTeX output.</code></pre>
</section>
<section id="writing-package-vignettes-1510-1605-the-knitr-package-on-cran" class="level4">
<h4 class="anchored" data-anchor-id="writing-package-vignettes-1510-1605-the-knitr-package-on-cran">Writing Package Vignettes (15:10-16:05) / The knitr package on CRAN</h4>
<pre><code>One of the best ways to write general documentation for a package
is to write a package vignette, using Sweave or another literate
programming system.  In this talk I will describe the process of 
writing vignettes, including the new additions to R that allow them
to be written for either PDF or HTML output.</code></pre>
</section>
</section>
<section id="月30日-国内ユーザによる報告" class="level3">
<h3 class="anchored" data-anchor-id="月30日-国内ユーザによる報告">11月30日 国内ユーザによる報告</h3>
<p>中澤先生による各報告のまとめは<a href="http://minato.sip21c.org/bulbul/20131130.html">こちら</a></p>
<table class="caption-top table">
<colgroup>
<col style="width: 18%">
<col style="width: 33%">
<col style="width: 48%">
</colgroup>
<thead>
<tr class="header">
<th>時刻</th>
<th style="text-align: left;">発表者</th>
<th style="text-align: left;">演題</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>09:25-09:30</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">開会挨拶および諸連絡</td>
</tr>
<tr class="even">
<td>09:30-09:55</td>
<td style="text-align: left;">合崎英男（農村工学研究所）</td>
<td style="text-align: left;">RによるBest-Worst Scaling</td>
</tr>
<tr class="odd">
<td>09:55-10:20</td>
<td style="text-align: left;">中間栄治（Com-One）・中野純司（統数研）</td>
<td style="text-align: left;">ハイパフォーマンスコンピューティングのためのRhpcパッケージ</td>
</tr>
<tr class="even">
<td>10:20-10:45</td>
<td style="text-align: left;">奥村晴彦（三重大）</td>
<td style="text-align: left;">TeX Liveと美文書第6版とR</td>
</tr>
<tr class="odd">
<td>10:45-11:00</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><em>休憩</em></td>
</tr>
<tr class="even">
<td>11:00-11:25</td>
<td style="text-align: left;">中谷朋昭（北海道大）</td>
<td style="text-align: left;">仮想状況評価法のためのパッケージDCchoice</td>
</tr>
<tr class="odd">
<td>11:25-11:50</td>
<td style="text-align: left;">小池祐太・野村亮介（東京大院）</td>
<td style="text-align: left;">Rによる確率過程の統計解析</td>
</tr>
<tr class="even">
<td>11:50-13:00</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><em>昼食</em></td>
</tr>
<tr class="odd">
<td>13:00-13:25</td>
<td style="text-align: left;">谷村晋（兵庫医科大）</td>
<td style="text-align: left;">Rによる多変量疾病地図</td>
</tr>
<tr class="even">
<td>13:25-13:50</td>
<td style="text-align: left;">中澤港（神戸大）</td>
<td style="text-align: left;">人口モデルに基づくウクライナの人口予測</td>
</tr>
<tr class="odd">
<td>13:50-14:15</td>
<td style="text-align: left;">中野康人（関西学院大）</td>
<td style="text-align: left;">日刊新聞読者投稿欄の計量テキスト分析</td>
</tr>
<tr class="even">
<td>14:15-14:30</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><em>休憩</em></td>
</tr>
<tr class="odd">
<td>14:30-14:55</td>
<td style="text-align: left;">藤野友和（福岡女子大）</td>
<td style="text-align: left;">Rによるインタラクティブグラフ生成とその応用</td>
</tr>
<tr class="even">
<td>14:55-15:20</td>
<td style="text-align: left;">鈴木了太（ef-prime）</td>
<td style="text-align: left;">データ解析のためのR GUIフロントエンド</td>
</tr>
<tr class="odd">
<td>15:20-15:45</td>
<td style="text-align: left;">神田善伸（自治医科大）</td>
<td style="text-align: left;">Rコマンダーに多彩な解析メニューを追加したEZR(Easy R)の開発</td>
</tr>
<tr class="even">
<td>15:45-16:00</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><em>休憩</em></td>
</tr>
<tr class="odd">
<td>16:00-17:00</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Japan.R Lightning Talk 大会:Japan.Rから5名の若手による実践報告</td>
</tr>
<tr class="even">
<td>17:00-</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">総合討論・閉会挨拶</td>
</tr>
</tbody>
</table>


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> トップに戻る</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "コピーしました");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "コピーしました");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/rjpusers\.github\.io\/rjpusers\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>